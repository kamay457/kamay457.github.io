const Canvas2Image=function(){const t=function(){const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:!!e,imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa}}();function e(t,e,n){const o=t.width,r=t.height;void 0===e&&(e=o),void 0===n&&(n=r);let a=document.createElement("canvas"),c=a.getContext("2d");return a.width=e,a.height=n,c.drawImage(t,0,0,o,r,0,0,e,n),a}function n(t,n,o,r){return(t=e(t,o,r)).toDataURL(n)}function o(t,e,n="name"){let o=document.createElement("a");o.download=n+"."+e,o.href=t,o.click()}function r(t){let e=document.createElement("img");return e.src=t,e}function a(t){return"image/"+(t=t.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}function c(t){if(!window.btoa)throw"btoa undefined";let e="";if("string"==typeof t)e=t;else for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function i(t){const e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function u(t,e){return"data:"+e+";base64,"+t}const g=function(t){const e=t.width,n=t.height,o=e*n*3,r=o+54,a=[66,77,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,54,0,0,0],i=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&o,o>>8&255,o>>16&255,o>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=(4-3*e%4)%4,g=t.data;let s="";const f=e<<2;let m=n;const d=String.fromCharCode;do{const t=f*(m-1);let n="";for(let o=0;o<e;o++){const e=o<<2;n+=d(g[t+e+2])+d(g[t+e+1])+d(g[t+e])}for(let t=0;t<u;t++)n+=String.fromCharCode(0);s+=n}while(--m);return c(a.concat(i))+c(s)},s=function(r,c,s,f,m){const d=f;if(t.canvas&&t.dataURL)if("string"==typeof r&&(r=document.getElementById(r)),void 0===f&&(f="png"),f=a(f),/bmp/.test(f)){const t=i(e(r,c,s));o(u(g(t),"image/octet-stream"),d,m)}else{o(n(r,f,c,s).replace(f,"image/octet-stream"),d,m)}},f=function(o,c,s,f){if(t.canvas&&t.dataURL){if("string"==typeof o&&(o=document.getElementById(o)),void 0===f&&(f="png"),f=a(f),/bmp/.test(f)){const t=i(e(o,c,s));return r(u(g(t),"image/bmp"))}return r(n(o,f,c,s))}};return{saveAsImage:s,saveAsPNG:function(t,e,n,o){return s(t,e,n,"png",o)},saveAsJPEG:function(t,e,n,o){return s(t,e,n,"jpeg",o)},saveAsGIF:function(t,e,n,o){return s(t,e,n,"gif",o)},saveAsBMP:function(t,e,n,o){return s(t,e,n,"bmp",o)},convertToImage:f,convertToPNG:function(t,e,n){return f(t,e,n,"png")},convertToJPEG:function(t,e,n){return f(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return f(t,e,n,"gif")},convertToBMP:function(t,e,n){return f(t,e,n,"bmp")}}}();